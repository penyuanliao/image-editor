<script setup lang="ts">
const emit = defineEmits(['addElement']);

const addText = () => {
  emit('addElement', {
    type: 'text',
    content: '雙擊編輯文字',
  });
};

const addIcon = (pathData: string) => {
  emit('addElement', {
    type: 'icon',
    content: pathData, // 傳遞 SVG 的 path d 屬性
  });
};
</script>

<template>
  <div class="elements-panel">
    <h3>元件</h3>
    <ul class="element-list">
      <li>
        <el-button @click="addText" class="element-button">
          <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor">
            <path d="M832 128H192c-17.7 0-32 14.3-32 32v128c0 17.7 14.3 32 32 32h256v512h-128c-17.7 0-32 14.3-32 32v64c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32v-64c0-17.7-14.3-32-32-32H576V320h256c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32z"></path>
          </svg>
          <span>新增文字</span>
        </el-button>
      </li>
      <li class="icon-section">
        <p class="section-title">圖示</p>
        <div class="icon-list">
          <div class="icon-item" title="星星" @click="addIcon('M512 747.3l-182.4 111.3c-13.9 8.5-31.1-3.1-29.5-18.9l48.1-209.1-160.9-138.2c-12.4-10.7-5.7-30.7 10-32.4l212.4-18.3L501.3 256c7.3-14.9 28.1-14.9 35.4 0l91.5 193.7 212.4 18.3c15.7 1.7 22.4 21.7 10 32.4L700 630.6l48.1 209.1c1.6 15.8-15.6 27.4-29.5 18.9L512 747.3z')"><svg viewBox="0 0 1024 1024"><path d="M512 747.3l-182.4 111.3c-13.9 8.5-31.1-3.1-29.5-18.9l48.1-209.1-160.9-138.2c-12.4-10.7-5.7-30.7 10-32.4l212.4-18.3L501.3 256c7.3-14.9 28.1-14.9 35.4 0l91.5 193.7 212.4 18.3c15.7 1.7 22.4 21.7 10 32.4L700 630.6l48.1 209.1c1.6 15.8-15.6 27.4-29.5 18.9L512 747.3z"/></svg></div>
          <div class="icon-item" title="愛心" @click="addIcon('M859.3 243.2a224.2 224.2 0 0 0-317.2 0L512 273.3 481.9 243.2a224.2 224.2 0 0 0-317.2 0A223.3 223.3 0 0 0 164.7 466v.2L512 830.8l347.3-364.4v-.2c0-123.1-99.7-223-222.2-223z')"><svg viewBox="0 0 1024 1024"><path d="M859.3 243.2a224.2 224.2 0 0 0-317.2 0L512 273.3 481.9 243.2a224.2 224.2 0 0 0-317.2 0A223.3 223.3 0 0 0 164.7 466v.2L512 830.8l347.3-364.4v-.2c0-123.1-99.7-223-222.2-223z"/></svg></div>
          <div class="icon-item" title="圓形" @click="addIcon('M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z')"><svg viewBox="0 0 1024 1024"><path d="M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"/></svg></div>
          <div class="icon-item" title="方形" @click="addIcon('M896 128H128v768h768V128zm-64 64v640H192V192h640z')"><svg viewBox="0 0 1024 1024"><path d="M896 128H128v768h768V128zm-64 64v640H192V192h640z"/></svg></div>
          <div class="icon-item" title="三角形" @click="addIcon('M64 896h896L512 128 64 896zm107.2-64h681.6L512 298.6 171.2 832z')"><svg viewBox="0 0 1024 1024"><path d="M64 896h896L512 128 64 896zm107.2-64h681.6L512 298.6 171.2 832z"/></svg></div>
          <div class="icon-item" title="加號" @click="addIcon('M896 448H576V128h-128v320H128v128h320v320h128V576h320z')"><svg viewBox="0 0 1024 1024"><path d="M896 448H576V128h-128v320H128v128h320v320h128V576h320z"/></svg></div>
          <div class="icon-item" title="閃電" @click="addIcon('M622.2 141.3c-5.1-15.1-22-22.3-37.1-17.2L299.3 243.4c-15.1 5.1-22.3 22-17.2 37.1L417.6 640H256c-17.7 0-32 14.3-32 32v64c0 4.4 3.6 8 8 8h176.8l-97.4 227.3c-5.1 15.1 2.1 32.2 17.2 37.3s32.2-2.1 37.3-17.2L622.2 754.4c5.1-15.1-2.1-32.2-17.2-37.3L470.4 640H640c17.7 0 32-14.3 32-32v-64c0-4.4-3.6-8-8-8H467.2l97.4-227.3c5.1-15.1-2.1-32.2-17.2-37.3l-25.2-9.1z')"><svg viewBox="0 0 1024 1024"><path d="M622.2 141.3c-5.1-15.1-22-22.3-37.1-17.2L299.3 243.4c-15.1 5.1-22.3 22-17.2 37.1L417.6 640H256c-17.7 0-32 14.3-32 32v64c0 4.4 3.6 8 8 8h176.8l-97.4 227.3c-5.1 15.1 2.1 32.2 17.2 37.3s32.2-2.1 37.3-17.2L622.2 754.4c5.1-15.1-2.1-32.2-17.2-37.3L470.4 640H640c17.7 0 32-14.3 32-32v-64c0-4.4-3.6-8-8-8H467.2l97.4-227.3c5.1-15.1-2.1-32.2-17.2-37.3l-25.2-9.1z"/></svg></div>
          <div class="icon-item" title="勾選" @click="addIcon('M803.9 243.2c-12.5-12.5-32.8-12.5-45.3 0L393.9 607.9 265.4 479.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l150.8 150.8c12.5 12.5 32.8 12.5 45.3 0L803.9 288.5c12.5-12.5 12.5-32.8 0-45.3z')"><svg viewBox="0 0 1024 1024"><path d="M803.9 243.2c-12.5-12.5-32.8-12.5-45.3 0L393.9 607.9 265.4 479.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l150.8 150.8c12.5 12.5 32.8 12.5 45.3 0L803.9 288.5c12.5-12.5 12.5-32.8 0-45.3z"/></svg></div>
          <div class="icon-item" title="雲朵" @click="addIcon('M782.3 408.4a260.4 260.4 0 0 0-448.6-103.8 254.2 254.2 0 0 0-1.2 508.2h698.4a189.6 189.6 0 0 0 39.8-376.9a188.7 188.7 0 0 0-288.4-27.5zM731.7 752.8H292.5a190.2 190.2 0 0 1 1.2-380.3l12.8-1.4a196.4 196.4 0 0 1 383.3 78.5l6.3 15.8a125.6 125.6 0 0 1 125.8 113.8 126.8 126.8 0 0 1-90.2 173.6z')"><svg viewBox="0 0 1024 1024"><path d="M782.3 408.4a260.4 260.4 0 0 0-448.6-103.8 254.2 254.2 0 0 0-1.2 508.2h698.4a189.6 189.6 0 0 0 39.8-376.9a188.7 188.7 0 0 0-288.4-27.5zM731.7 752.8H292.5a190.2 190.2 0 0 1 1.2-380.3l12.8-1.4a196.4 196.4 0 0 1 383.3 78.5l6.3 15.8a125.6 125.6 0 0 1 125.8 113.8 126.8 126.8 0 0 1-90.2 173.6z"/></svg></div>
          <div class="icon-item" title="太陽" @click="addIcon('M512 640a128 128 0 1 0 0-256 128 128 0 0 0 0 256zm0 64a192 192 0 1 1 0-384 192 192 0 0 1 0 384zM512 960a64 64 0 0 1-64-64V704a64 64 0 0 1 128 0v192a64 64 0 0 1-64 64zm0-832a64 64 0 0 1-64-64V64a64 64 0 0 1 128 0v192a64 64 0 0 1-64 64zm448 448a64 64 0 0 1-64 64H704a64 64 0 0 1 0-128h192a64 64 0 0 1 64 64zm-832 0a64 64 0 0 1-64 64H64a64 64 0 0 1 0-128h192a64 64 0 0 1 64 64zM224.2 799.8a64 64 0 0 1-45.3-109.3l135.7-135.7a64 64 0 0 1 90.5 90.5L269.4 790.3a63.5 63.5 0 0 1-45.2 9.5zm571.6 0a63.5 63.5 0 0 1-45.2-9.5L614.9 654.6a64 64 0 0 1 90.5-90.5l135.7 135.7a64 64 0 0 1-45.3 109.3zM224.2 224.2a64 64 0 0 1-45.2-109.2L314.7 79.7a64 64 0 1 1 90.5 90.5L269.4 214.7a63.5 63.5 0 0 1-45.2 9.5zm571.6 0a63.5 63.5 0 0 1-45.2-9.5L614.9 79.7a64 64 0 1 1 90.5 90.5l135.7 135.7a64 64 0 0 1-45.3 109.2z')"><svg viewBox="0 0 1024 1024"><path d="M512 640a128 128 0 1 0 0-256 128 128 0 0 0 0 256zm0 64a192 192 0 1 1 0-384 192 192 0 0 1 0 384zM512 960a64 64 0 0 1-64-64V704a64 64 0 0 1 128 0v192a64 64 0 0 1-64 64zm0-832a64 64 0 0 1-64-64V64a64 64 0 0 1 128 0v192a64 64 0 0 1-64 64zm448 448a64 64 0 0 1-64 64H704a64 64 0 0 1 0-128h192a64 64 0 0 1 64 64zm-832 0a64 64 0 0 1-64 64H64a64 64 0 0 1 0-128h192a64 64 0 0 1 64 64zM224.2 799.8a64 64 0 0 1-45.3-109.3l135.7-135.7a64 64 0 0 1 90.5 90.5L269.4 790.3a63.5 63.5 0 0 1-45.2 9.5zm571.6 0a63.5 63.5 0 0 1-45.2-9.5L614.9 654.6a64 64 0 0 1 90.5-90.5l135.7 135.7a64 64 0 0 1-45.3 109.3zM224.2 224.2a64 64 0 0 1-45.2-109.2L314.7 79.7a64 64 0 1 1 90.5 90.5L269.4 214.7a63.5 63.5 0 0 1-45.2 9.5zm571.6 0a63.5 63.5 0 0 1-45.2-9.5L614.9 79.7a64 64 0 1 1 90.5 90.5l135.7 135.7a64 64 0 0 1-45.3 109.2z"/></svg></div>
        </div>
      </li>
    </ul>
  </div>
</template>

<style scoped>
.elements-panel {
  padding: 1rem;
  background-color: #ffffff;
  border-right: 1px solid #e0e0e0;
  height: 100%;
}

h3 {
  margin-top: 0;
  color: #333;
}

.element-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.element-button {
  width: 100%;
  justify-content: flex-start;
}

/* el-button 內部是 flex 容器，我們用 gap 來增加圖示和文字的間距 */
/* 使用 :deep() 來穿透 scoped CSS */
:deep(.element-button .el-button__inner) {
  display: flex;
  align-items: center;
  gap: 8px;
}

.icon-section {
  margin-top: 1rem;
}

.section-title {
  font-size: 14px;
  color: #666;
  margin-bottom: 0.5rem;
}

.icon-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
  gap: 8px;
}

.icon-item {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 40px;
  background-color: #f5f5f5;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
  border: 1px solid #e0e0e0;
}

.icon-item:hover {
  background-color: #e9e9e9;
  border-color: #ccc;
}

.icon-item svg {
  width: 24px;
  height: 24px;
  fill: #333;
}
</style>